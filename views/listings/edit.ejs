<% layout("/layouts/boilerplate") %>

<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-10">
      <div class="card shadow-lg border-0 rounded-4">
        <div class="card-header bg-dark text-white text-center rounded-top-4">
          <h3 class="mb-0">‚úèÔ∏è Edit Listing</h3>
        </div>

        <div class="card-body p-4">
          <form
            action="/listings/<%= listing._id %>?_method=PUT"
            method="POST"
            novalidate
            class="needs-validation row g-3"
          >
            <!-- Title -->
            <div class="col-md-6">
              <label for="title" class="form-label fw-bold">Title</label>
              <input
                type="text"
                id="title"
                name="listing[title]"
                value="<%= listing.title %>"
                placeholder="Enter title"
                required
                class="form-control"
              />
              <div class="invalid-feedback">‚ö†Ô∏è Title is required.</div>
              <div class="valid-feedback">‚úÖ Looks good!</div>
            </div>

            <!-- Price -->
            <div class="col-md-6">
              <label for="price" class="form-label fw-bold">Price</label>
              <input
                type="number"
                id="price"
                name="listing[price]"
                value="<%= listing.price %>"
                placeholder="Enter price"
                required
                class="form-control"
              />
              <div class="invalid-feedback">‚ö†Ô∏è Please enter a valid price.</div>
              <div class="valid-feedback">‚úÖ Price is valid.</div>
            </div>

            <!-- Description -->
            <div class="col-12">
              <label for="description" class="form-label fw-bold"
                >Description</label
              >
              <textarea
                id="description"
                name="listing[description]"
                rows="3"
                placeholder="Enter description"
                required
                class="form-control"
              >
<%= listing.description %></textarea
              >
              <div class="invalid-feedback">
                ‚ö†Ô∏è Description cannot be empty.
              </div>
            </div>

            <!-- Location -->
            <div class="col-md-6">
              <label for="location" class="form-label fw-bold">Location</label>
              <input
                type="text"
                id="location"
                name="listing[location]"
                value="<%= listing.location %>"
                placeholder="Enter location"
                required
                class="form-control"
              />
              <div class="invalid-feedback">‚ö†Ô∏è Location is required.</div>
            </div>

            <!-- Country -->
            <div class="col-md-6">
              <label for="country" class="form-label fw-bold">Country</label>
              <input
                type="text"
                id="country"
                name="listing[country]"
                value="<%= listing.country %>"
                placeholder="Enter country"
                required
                class="form-control"
              />
              <div class="invalid-feedback">‚ö†Ô∏è Country is required.</div>
            </div>

            <!-- Image -->
            <div class="col-12">
              <label for="image" class="form-label fw-bold">Image URL</label>
              <input
                type="text"
                id="image"
                name="listing[image][url]"
                value="<%= listing.image?.url %>"
                placeholder="Enter image URL"
                class="form-control"
                required
              />
              <div class="invalid-feedback">‚ö†Ô∏è Image URL is required.</div>

              <div class="mt-3">
                <p class="fw-semibold">Current Image:</p>
                <img
                  src="<%= listing.image?.url %>"
                  alt="Listing Image"
                  class="img-thumbnail shadow-sm"
                  width="220"
                />
              </div>
            </div>

            <!-- Submit -->
            <div class="col-12 mt-4 d-flex justify-content-between">
              <button
                type="submit"
                class="btn btn-dark btn-lg rounded-pill shadow-sm px-4"
              >
                üíæ Update Listing
              </button>
              <a
                href="/listings/<%= listing._id %>"
                class="btn btn-outline-secondary btn-lg rounded-pill px-4"
                >Cancel</a
              >
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="/JS/script.js"></script>
